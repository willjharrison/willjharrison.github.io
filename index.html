<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sensory Intelligence Research Group</title>
  <meta name="description" content="Sensory Intelligence Research Group — minimal, responsive landing page." />

  <style>
    :root{
      --bg: #F5F5F5;
      --fg: #523D3D;
      --accent: #7ABFA4;
      --muted: #A64B32;
      --font-main: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      --title-size: clamp(2rem, 4vw, 3rem);
      --subtitle-size: clamp(1rem, 2.4vw, 1.35rem);
      --max-w: 1200px;
      --pad-x: clamp(16px, 4vw, 40px);
      --gap: 22px;
    }
    body{
      margin:0; background:var(--bg); color:var(--fg); font-family:var(--font-main);
      display:flex; flex-direction:column; min-height:100vh;
    }
    header{
      position:sticky; top:0; z-index:10; background:var(--bg);
      padding: var(--pad-x) var(--pad-x) calc(var(--gap) * 1.5);
      text-align:center;
    }
    .title{ font-size:var(--title-size); margin:0 0 var(--gap) 0; }
    .subtitle{ font-size:var(--subtitle-size); color:var(--muted); margin:0 0 var(--gap) 0; }
    .actions {
  display: flex;
  gap: 8px;
  justify-content: center;
  flex-wrap: nowrap;
}
.btn {
  flex: 1 1 auto;   /* allow buttons to shrink */
  min-width: max-content; /* prevent text from breaking */
}
    .btn{ padding:10px 16px; border:1px solid var(--fg); border-radius:6px; text-decoration:none; color:var(--fg); cursor:pointer; background:transparent; }
    .btn:hover{ background:var(--accent); color:#000; }
    .btn.active {
        background: var(--accent);
        color: #D1FFEC;
        font-weight: bold;
    }
    main{ flex:1; max-width:var(--max-w); margin:0 auto; padding:0 var(--pad-x); }
    #content{ margin-top:calc(var(--gap)*2); text-align:left; max-width:700px; margin-left:auto; margin-right:auto; white-space:pre-wrap; line-height:1.4; }

    #content h1, #content h2, #content h3{
      text-align:center; font-weight:700; margin: 1.1em 0 0.6em;
    }
    
/* Standardize paragraph spacing: only add a bottom margin if followed by another paragraph */
#content p {
  margin-top: 0;
  margin-bottom: 0.1em;
  line-height: 1.25;
}

/* Remove extra space between headings and following paragraphs */
#content h2 + p, #content h3 + p {
  margin-top: 0;
}
    footer{ text-align:center; padding:20px; font-size:.9rem; opacity:.7; margin-top:auto; }
    .hidden{ display:none; }

    details {
  margin: 0.8em 0;
  border: 1px solid var(--muted);
  border-radius: 6px;
  padding: 0.6em 0.8em;
  background: color-mix(in srgb, var(--accent) 10%, transparent);
}
summary {
  cursor: pointer;
  font-weight: bold;
}
details[open] {
  background: color-mix(in srgb, var(--accent) 20%, transparent);
}
    
  </style>
</head>
<body>
  <header>
    <h1 class="title">Sensory Intelligence Research Group</h1>
    <p class="subtitle">From neurons to behaviour through computation and experiment.</p>
    <nav class="actions" aria-label="Primary">
      <a class="btn" href="#about" data-file="about.txt" data-title="About">About</a>
      <a class="btn" href="#research" data-file="research-topics.txt" data-title="Research">Research Themes</a>
      <a class="btn" href="#pushingback" data-file="pushingback.txt" data-title="Pushing back on AI">Pushing Back On A.I.</a>
      <a class="btn" href="#publications" data-file="publications.txt" data-title="Publications">Publications</a>
      <a class="btn" href="#collaborators" data-file="collaborators.txt" data-title="Collaborators">Collaborators</a>
      <a class="btn" href="#opportunities" data-file="opportunities.txt" data-title="Opportunities">Opportunities</a>
    </nav>
  </header>

  <main>
    <section id="content" class="hidden" aria-live="polite"></section>
  </main>

  <footer>
    © <span id="y"></span> Sensory Intelligence Research Group · Will Harrison, University of the Sunshine Coast
  </footer>

  <script>
    document.getElementById('y').textContent = new Date().getFullYear();

    const contentEl = document.getElementById('content');
    const buttons = document.querySelectorAll('.actions .btn[data-file]');
    const TXT_CACHE = new Map();

    async function prefetchAll(){
      const unique = [...new Set(Array.from(buttons, b => b.getAttribute('data-file')))].filter(Boolean);
      await Promise.all(unique.map(async (path) => {
        try{
          const res = await fetch(path, {cache: 'no-store'});
          if(!res.ok) return;
          const txt = (await res.text()).trim();
          TXT_CACHE.set(path, txt);
        }catch(_){ }
      }));
    }

    function setLoading(label){
      contentEl.classList.remove('hidden');
      contentEl.textContent = `Loading ${label}…`;
    }

    async function loadText(path, label){
      let txt;
      if (TXT_CACHE.has(path)){
        txt = TXT_CACHE.get(path);
      } else {
        try{
          setLoading(label);
          const res = await fetch(path, {cache: 'no-store'});
          if(!res.ok) throw new Error(`${res.status} ${res.statusText}`);
          txt = (await res.text()).trim();
          TXT_CACHE.set(path, txt);
        }catch(err){
          contentEl.textContent = `Could not load ${label}. (${err.message})`;
          return;
        }
      }
      contentEl.classList.remove('hidden');
      contentEl.innerHTML = txt || `(No content in ${path})`;
    }

    function handleClick(ev){
      const a = ev.currentTarget;
      const file = a.getAttribute('data-file');
      const label = a.getAttribute('data-title') || a.textContent.trim();
      ev.preventDefault();
      history.replaceState(null, '', a.getAttribute('href'));
    
      // Remove active class from all buttons
      buttons.forEach(btn => btn.classList.remove('active'));
    
      // Add active class to the clicked button
      a.classList.add('active');
    
      loadText(file, label);
    }

    buttons.forEach(a => a.addEventListener('click', handleClick));

    function bootFromHash(){
      const hash = location.hash.replace('#','');
      if(!hash) return;
      const target = Array.from(buttons).find(a => a.getAttribute('href') === `#${hash}`);
      if(target) target.click();
    }

    window.addEventListener('hashchange', bootFromHash);
    prefetchAll().then(() => bootFromHash());
  </script>
</body>
</html>
