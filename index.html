<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sensory Intelligence Research Group</title>
  <meta name="description" content="Sensory Intelligence Research Group — minimal, responsive landing page." />

  <!-- ===================
       TWEAKABLE PARAMETERS
  ==================== -->
  <style>
    :root{
      --bg: #0b0c10;
      --fg: #eaf2ef;
      --accent: #7ef7c9;
      --muted: #aab5b0;
      --font-main: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      --title-size: clamp(2.2rem, 6vw, 4.5rem);
      --subtitle-size: clamp(1rem, 2.4vw, 1.35rem);
      --max-w: 1100px;
      --pad-x: clamp(16px, 4vw, 40px);
      --gap: 22px;
    }
    body{
      margin:0; background:var(--bg); color:var(--fg); font-family:var(--font-main);
    }
    main{ min-height:100svh; display:grid; place-items:center; padding:var(--pad-x); }
    .wrap{ max-width:var(--max-w); text-align:center; }
    .title{ font-size:var(--title-size); margin:0 0 var(--gap) 0; }
    .subtitle{ font-size:var(--subtitle-size); color:var(--muted); margin:0 0 var(--gap) 0; }
    .actions{ display:flex; gap:12px; justify-content:center; flex-wrap:wrap; }
    .btn{ padding:10px 16px; border:1px solid var(--fg); border-radius:6px; text-decoration:none; color:var(--fg); cursor:pointer; background:transparent; }
    .btn:hover{ background:var(--accent); color:#000; }
    #content{ margin-top:var(--gap); text-align:left; max-width:700px; margin-left:auto; margin-right:auto; white-space:pre-wrap; line-height:1.4; }
    footer{ text-align:center; padding:20px; font-size:.9rem; opacity:.7; }
    /* Content area */
    .content{ 
      margin: calc(var(--gap) * 1.2) auto 0; 
      padding: clamp(14px, 3.5vw, 24px); 
      max-width: 70ch; text-align: left; white-space: pre-wrap; 
      background: color-mix(in oklab, var(--fg), transparent 96%);
      border: 1px solid color-mix(in oklab, var(--fg), transparent 80%);
      border-radius: var(--card-radius);
      box-shadow: var(--shadow);
    }
    .hidden{ display:none; }
  </style>
</head>
<body>
  <main>
    <div class="wrap">
      <h1 class="title">Sensory Intelligence Research Group</h1>
      <p class="subtitle">From neurons to behaviour through computation and experiment.</p>
      <nav class="actions" aria-label="Primary">
        <a class="btn" href="#about" data-file="about.txt" data-title="About">About</a>
        <a class="btn" href="#research" data-file="research-topics.txt" data-title="Research">Research</a>
        <a class="btn" href="#publications" data-file="publications.txt" data-title="Publications">Publications</a>
        <a class="btn" href="#collaborators" data-file="collaborators.txt" data-title="Collaborators">Collaborators</a>
        <a class="btn" href="#opportunities" data-file="opportunities.txt" data-title="Opportunities">Opportunities</a>
      </nav>

      <section id="content" class="content hidden" aria-live="polite"></section>
      <div id="content"></div>
    </div>
  </main>

  <footer>
    © <span id="y"></span> Sensory Intelligence Research Group · University of the Sunshine Coast
  </footer>

  <script>
    document.getElementById('y').textContent = new Date().getFullYear();

    function loadText(file){
      fetch(file)
        .then(resp => resp.text())
        .then(text => {
          document.getElementById('content').textContent = text;
        })
        .catch(err => {
          document.getElementById('content').textContent = 'Error loading ' + file;
        });
    }
  </script>
  <script>
    // Small nicety: keep the year current (no dependencies)
    document.getElementById('y').textContent = new Date().getFullYear();

    // Minimal client-side loader for local text files (same-origin).
    // Place the .txt files at the site root (same folder as index.html)
    // or adjust the paths in data-file attributes above.
    const contentEl = document.getElementById('content');
    const buttons = document.querySelectorAll('.actions .btn[data-file]');

    // In-memory cache for preloaded text (path -> string)
    const TXT_CACHE = new Map();

    // Prefetch all linked .txt files on load for instant switching later
    async function prefetchAll(){
      const unique = [...new Set(Array.from(buttons, b => b.getAttribute('data-file')))].filter(Boolean);
      await Promise.all(unique.map(async (path) => {
        try{
          const res = await fetch(path, {cache: 'no-store'});
          if(!res.ok) return;
          const txt = (await res.text()).trim();
          TXT_CACHE.set(path, txt);
        }catch(_){ /* ignore */ }
      }));
    }

    function setLoading(label){
      contentEl.classList.remove('hidden');
      contentEl.textContent = `Loading ${label}…`;
    }
    async function loadText(path, label){
      // Serve from cache if available
      if (TXT_CACHE.has(path)){
        contentEl.classList.remove('hidden');
        const txt = TXT_CACHE.get(path);
        contentEl.textContent = (txt && txt.length) ? txt : `(No content in ${path})`;
        return;
      }
      try{
        setLoading(label);
        const res = await fetch(path, {cache: 'no-store'});
        if(!res.ok) throw new Error(`${res.status} ${res.statusText}`);
        const txt = (await res.text()).trim();
        TXT_CACHE.set(path, txt);
        contentEl.textContent = txt || `(No content in ${path})`;
      }catch(err){
        contentEl.textContent = `Could not load ${label}. (${err.message})`;
      }
    })`;
        return;
      }
      try{
        setLoading(label);
        const res = await fetch(path, {cache: 'no-store'});
        if(!res.ok) throw new Error(`${res.status} ${res.statusText}`);
        const txt = (await res.text()).trim();
        TXT_CACHE.set(path, txt);
        contentEl.textContent = txt || `(No content in ${path})`;
      }catch(err){
        contentEl.textContent = `Could not load ${label}. (${err.message})`;
      }
    });
        if(!res.ok) throw new Error(`${res.status} ${res.statusText}`);
        const txt = await res.text();
        contentEl.textContent = txt.trim() || `(No content in ${path})`;
      }catch(err){
        contentEl.textContent = `Could not load ${label}. (${err.message})`;
      }
    }

    function handleClick(ev){
      const a = ev.currentTarget;
      const file = a.getAttribute('data-file');
      const label = a.getAttribute('data-title') || a.textContent.trim();
      ev.preventDefault();
      history.replaceState(null, '', a.getAttribute('href'));
      loadText(file, label);
    }

    buttons.forEach(a => a.addEventListener('click', handleClick));

    // Deep-link support: if URL hash matches a button, auto-load on open.
    function bootFromHash(){
      const hash = location.hash.replace('#','');
      if(!hash) return;
      const target = Array.from(buttons).find(a => a.getAttribute('href') === `#${hash}`);
      if(target) target.click();
    }
    window.addEventListener('hashchange', bootFromHash);
    prefetchAll().then(() => bootFromHash());
  </script>
</body>
</html>
